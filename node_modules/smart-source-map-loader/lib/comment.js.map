{"version":3,"file":"comment.js","names":["_util","require","rDirective","rCommentLine","rCommentBlock","rComments","rCommentEnd","rCommentEndMatch","RegExp","parse","code","m","match","footer","comment","directive","url","body","substring","length","pathsFromURL","decoded","decodeURISafe"],"sources":["../src/comment.mjs"],"sourcesContent":["import {decodeURISafe} from './util';\n\nconst rDirective = '([@#][ \\\\t]+sourceMappingURL=([^\\r\\n]*[^\\\\s]+))';\nconst rCommentLine = `(\\\\/\\\\/${rDirective}[ \\\\t]*)`;\nconst rCommentBlock = `(\\\\/\\\\*${rDirective}[ \\\\t]*\\\\*\\\\/)`;\nconst rComments = `(${rCommentLine}|${rCommentBlock})`;\nconst rCommentEnd = `(${rComments}\\\\s*)$`;\nconst rCommentEndMatch = new RegExp(rCommentEnd);\n\n/**\n * Parse code for source map comment.\n *\n * @param {string} code JavaScript code.\n * @returns {object} Parsed object.\n */\nexport function parse(code) {\n\tconst m = code.match(rCommentEndMatch);\n\tif (!m) {\n\t\treturn null;\n\t}\n\n\t// eslint-disable-next-line prefer-destructuring\n\tconst footer = m[0];\n\t// eslint-disable-next-line prefer-destructuring\n\tconst comment = m[2];\n\tconst directive = m[4] || m[7];\n\tconst url = m[5] || m[8];\n\tconst body = code.substring(0, code.length - footer.length);\n\n\treturn {\n\t\tbody,\n\t\tfooter,\n\t\tcomment,\n\t\tdirective,\n\t\turl\n\t};\n}\n\n/**\n * Get possible paths from URL, decoded and not if different.\n *\n * @param {string} url URL to be parsed.\n * @returns {Array} Possible paths.\n */\nexport function pathsFromURL(url) {\n\tconst decoded = decodeURISafe(url);\n\tif (decoded && decoded !== url) {\n\t\treturn [url, decoded];\n\t}\n\treturn [url];\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,KAAA,GAAAC,OAAA;AAEA,MAAMC,UAAU,GAAG,iDAAiD;AACpE,MAAMC,YAAY,GAAI,UAASD,UAAW,UAAS;AACnD,MAAME,aAAa,GAAI,UAASF,UAAW,gBAAe;AAC1D,MAAMG,SAAS,GAAI,IAAGF,YAAa,IAAGC,aAAc,GAAE;AACtD,MAAME,WAAW,GAAI,IAAGD,SAAU,QAAO;AACzC,MAAME,gBAAgB,GAAG,IAAIC,MAAM,CAACF,WAAW,CAAC;;AAEhD;AACA;AACA;AACA;AACA;AACA;AACO,SAASG,KAAKA,CAACC,IAAI,EAAE;EAC3B,MAAMC,CAAC,GAAGD,IAAI,CAACE,KAAK,CAACL,gBAAgB,CAAC;EACtC,IAAI,CAACI,CAAC,EAAE;IACP,OAAO,IAAI;EACZ;;EAEA;EACA,MAAME,MAAM,GAAGF,CAAC,CAAC,CAAC,CAAC;EACnB;EACA,MAAMG,OAAO,GAAGH,CAAC,CAAC,CAAC,CAAC;EACpB,MAAMI,SAAS,GAAGJ,CAAC,CAAC,CAAC,CAAC,IAAIA,CAAC,CAAC,CAAC,CAAC;EAC9B,MAAMK,GAAG,GAAGL,CAAC,CAAC,CAAC,CAAC,IAAIA,CAAC,CAAC,CAAC,CAAC;EACxB,MAAMM,IAAI,GAAGP,IAAI,CAACQ,SAAS,CAAC,CAAC,EAAER,IAAI,CAACS,MAAM,GAAGN,MAAM,CAACM,MAAM,CAAC;EAE3D,OAAO;IACNF,IAAI;IACJJ,MAAM;IACNC,OAAO;IACPC,SAAS;IACTC;EACD,CAAC;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,SAASI,YAAYA,CAACJ,GAAG,EAAE;EACjC,MAAMK,OAAO,GAAG,IAAAC,mBAAa,EAACN,GAAG,CAAC;EAClC,IAAIK,OAAO,IAAIA,OAAO,KAAKL,GAAG,EAAE;IAC/B,OAAO,CAACA,GAAG,EAAEK,OAAO,CAAC;EACtB;EACA,OAAO,CAACL,GAAG,CAAC;AACb"}